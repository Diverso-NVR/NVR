<body>
  <form
    class="ui form"
    style=" margin: 10% 30%;
            width: 400px;"
  >
    <h2 class="ui image header" style="text-align:center; width:400px">
      Регистрация
    </h2>
    <div class="field">
      <label>Логин</label>
      <input type="text" name="login" placeholder="example@hse.ru" id="login" />
    </div>
    <div class="field">
      <label>Пароль</label>
      <input type="password" name="password" id="password" />
    </div>
    <div class="field">
      <label>Подтвердить пароль</label>
      <input type="password" name="password" id="confirmPassword" />
    </div>
    <div class="field">
      <div class="ui sub header">Факультет</div>
      <select name="campus" class="ui fluid normal dropdown" id="campus">
        <option value="miem">МИЭМ</option>
        <option value="fcmd">ФКМД</option>
        <option value="cs">ФКН</option>
      </select>
    </div>
    <div class="ui fluid large black submit button" id="submit">
      Отправить
    </div>
    <div class="ui negative message" id="error" style="display:none">
      Ошибка при вводе данных
    </div>
  </form>

  <script>
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    $("#submit").click(() => {
      if (
        !$("#password").val() ||
        $("#password").val() != $("#confirmPassword").val() ||
        !re.test($("#login").val())
      ) {
        $("#error").css("display", "block");
        return;
      }
      axios.post(
        "/newuser/" +
          $("#login").val() +
          "/" +
          $("#password").val() +
          "/" +
          $("#campus").val() +
          "/user"
      );
      $.ajax("/").done(data => {
        $("body").html(data);
      });
    });
  </script>
</body>
